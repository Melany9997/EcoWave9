<h1 class="ecowave-header">EcoWave</h1>
<div class="materials-show-container">

  <%= simple_form_for(@material, url: materials_path, html: { multipart: true, id: "fabric-form" }) do |f| %>

  <div class="material-photo-container">
    <label for="material_photo" class="material-photo-label">
      <%= image_tag(@material.photo.attached? ? @material.photo : "placeholder-image.png",
                    class: "material-photo",
                    alt: "Upload Fabric Photo") %>
      <div class="quantity-toggle">+</div>
    </label>
    <%= f.input :photo, label: false, as: :file, input_html: { id: "material_photo", class: "d-none" } %>
  </div>

  <!-- Dynamic Quantity Display -->
  <!-- Dynamic Quantity & Fabric Type Display -->
  <div class="fabric-name">
    <h2 id="fabric-type-display"><%= @material.fabric_type.presence || "FABRIC TYPE" %></h2>
    <p>
      QUANTITY: <span id="quantity-display"><%= @material.length || '...' %></span>m
    </p>
  </div>

    <!-- FABRIC TYPE & QUANTITY -->
    <div class="fabric-info-wrapper">
      <h2 id="fabric-type-display" class="fabric-title"><%= @material.fabric_type.presence || "FABRIC TYPE" %></h2>
      <p class="fabric-quantity">
        QUANTITY: <span id="quantity-display"><%= @material.length || '...' %></span>m
      </p>
    </div>

    <!-- DETAILS FORM -->
    <div class="details-card">
      <h2 class="details-card-header">DETAILS</h2>

      <div class="details-input-container"> <!-- Added this container -->
        <%= f.input :fabric_type, label: false, placeholder: "TYPE", wrapper_html: { class: "material-input" } %>
        <%= f.input :fiber, label: false, placeholder: "FIBER", wrapper_html: { class: "material-input" } %>

        <div class="dimensions-wrapper">
          <span class="dimensions-label">DIMENSIONS:</span>
          <div class="dimensions-container">
            <%= f.input :length, label: false, placeholder: "L(m)", wrapper_html: { class: "material-input-small" } %>
            <%= f.input :width, label: false, placeholder: "W(cm)", wrapper_html: { class: "material-input-small" } %>
            <%= f.input :grams_per_square_meter, label: false, placeholder: "G/MÂ²", wrapper_html: { class: "material-input-small" } %>
          </div>
        </div>

        <%= f.input :colour, label: false, placeholder: "COLOR", wrapper_html: { class: "material-input" } %>
        <%= f.input :texture, label: false, placeholder: "TEXTURE", wrapper_html: { class: "material-input" } %>
        <%= f.input :origin, label: false, placeholder: "ORIGIN", wrapper_html: { class: "material-input" } %>
        <%= f.input :supplier, label: false, placeholder: "SUPPLIER", wrapper_html: { class: "material-input" } %>
        <%= f.input :product_code, label: false, placeholder: "PRODUCT CODE", wrapper_html: { class: "material-input" } %>
        <%= f.input :purchase_location, label: false, placeholder: "PURCHASE LOCATION", wrapper_html: { class: "material-input" } %>
        <div class="details-date">
          <%= f.input :purchase_date,as: :string, label: false, input_html: { data: { controller: "datepicker" }, placeholder: "PURCHASE DATE" }, wrapper_html: { class: "material-input" } %>

          <!--<%= f.input :purchase_date, label: false, placeholder: "PURCHASE DATE", as: :date, wrapper_html: { class: "material-input" } %>-->
        </div>
        <%= f.input :price_per_meter, label: false, placeholder: "PRICE PER METER", wrapper_html: { class: "material-input" } %>
        <%= f.input :certifications, label: false, placeholder: "CERTIFICATIONS", wrapper_html: { class: "material-input" } %>
      </div>

      <div class="details-notes">
        <%= f.input :notes, label: false, placeholder: "NOTES", wrapper_html: { class: "material-input" } %>
      </div>
    </div>



    <!-- FORM BUTTONS -->
  <div class="form-buttons">
    <%= f.submit "ADD FABRIC", class: "interface-white-button" %>
    <%= link_to "CANCEL", materials_path, class: "interface-black-button" %>
  </div>

<<<<<<< HEAD
  <!-- Form Buttons -->
  <div class="button-group">
    <%= f.button :submit, "ADD FABRIC", class: "add-fabric" %>
    <%= link_to "CANCEL", materials_path, class: "cancel-btn" %>
  </div>
<% end %>
<br>
    <br>
    <br>
    <br>
<style>
  .image-upload .upload-box {
    width: 200px;
    height: 200px;
    border-radius: 50%;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f5f5f5;
  }

  .upload-box i {
    font-size: 2rem;
    color: #555;
  }

  .preview-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .fabric-name {
    margin-top: 20px;
  }

  .details-box {
    margin-top: 30px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 8px;
  }

  .details-box .dimensions {
    display: flex;
    gap: 10px;
  }

  .button-group {
    margin-top: 20px;
    display: flex;
    gap: 10px;
  }
</style>

<script>
  // Image preview functionality
  const photoInput = document.getElementById('material_photo');
  if (photoInput) {
    photoInput.addEventListener('change', function(e) {
      const [file] = e.target.files;
      if (file) {
        const preview = document.querySelector('.upload-box');
        preview.innerHTML = `<img src="${URL.createObjectURL(file)}" class="preview-img">`;
      }
    });
  }

  // Dynamic quantity update
  const lengthInput = document.getElementById('material_length');
  if (lengthInput) {
    lengthInput.addEventListener('input', function(e) {
      const quantityDisplay = document.getElementById('quantity-display');
      quantityDisplay.textContent = e.target.value || '...';
    });
  }

  // Dynamic fabric type update
  const fabricTypeInput = document.getElementById('material_fabric_type');
  if (fabricTypeInput) {
    fabricTypeInput.addEventListener('input', function(e) {
      const fabricTypeDisplay = document.getElementById('fabric-type-display');
      fabricTypeDisplay.textContent = e.target.value || 'FABRIC TYPE';
    });
  }
</script>
=======
  <% end %>
</div>
>>>>>>> master
